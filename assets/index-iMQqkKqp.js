import{d as p,_ as E,j as e,af as Y,b as f,h as $,k as O,ag as w,ah as Z,ai as J,s as q,i as ee,G as te,D as oe,B as T,S as H,aj as U,T as V,n as B,A as z,C as se,P as re}from"./index-D07-dc0l.js";import{P as ne}from"./PageHeader-CkfhGLDI.js";import{g as N,u as M,b as k,c as K,G as R,d as ae,e as le,f as ie,i as ce,h as ue,j as de,k as pe,B as be,l as he,m as A,n as me,C as Q,D as xe}from"./DataGrid-Cf3CqzMC.js";import{G as W}from"./Grid-BjrsxhOk.js";import{h as fe}from"./FilterField--5x4zRo_.js";import{u as ge,s as je}from"./ContextProvider-CCP50vBM.js";import{u as D,L as Ce}from"./useGridRootProps-BliUiPpb.js";import{M as ye}from"./MenuItem-DXcosV0a.js";import"./Divider-qLonpfiI.js";import"./dividerClasses-BgmbBrL9.js";import"./colorManipulator-lOiUYxC3.js";import"./DatePicker-CAbog7w5.js";import"./DateCalendar-DmNS7L1X.js";const Fe=["className","children"],Se=o=>{const{classes:t}=o;return O({root:["toolbarContainer"]},N,t)},Te=Y("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(o,t)=>t.toolbarContainer})(({theme:o})=>({display:"flex",alignItems:"center",flexWrap:"wrap",gap:o.spacing(1),padding:o.spacing(.5,.5,0)})),Pe=p.forwardRef(function(t,a){const{className:i,children:l}=t,c=E(t,Fe),s=D(),r=Se(s);return l?e.jsx(Te,f({ref:a,className:$(i,r.root),ownerState:s},c,{children:l})):null}),ve=p.forwardRef(function(t,a){var m,F;const{slotProps:i={}}=t,l=i.button||{},c=i.tooltip||{},s=w(),r=w(),n=M(),u=D(),b=k(n,K),x=P=>{var S;b.open&&b.openedPanelValue===R.columns?n.current.hidePreferences():n.current.showPreferences(R.columns,r,s),(S=l.onClick)==null||S.call(l,P)};if(u.disableColumnSelector)return null;const h=b.open&&b.panelId===r;return e.jsx(u.slots.baseTooltip,f({title:n.current.getLocaleText("toolbarColumnsLabel"),enterDelay:1e3},c,(m=u.slotProps)==null?void 0:m.baseTooltip,{children:e.jsx(u.slots.baseButton,f({ref:a,id:s,size:"small","aria-label":n.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?r:void 0,startIcon:e.jsx(u.slots.columnSelectorIcon,{})},l,{onClick:x},(F=u.slotProps)==null?void 0:F.baseButton,{children:n.current.getLocaleText("toolbarColumns")}))}))}),Le=p.forwardRef(function(t,a){var j,I;const{slotProps:i={}}=t,l=i.button||{},c=i.tooltip||{},s=M(),r=D(),n=k(s,ae),u=w(),b=w(),[x,h]=p.useState(!1),m=p.useRef(null),F=Z(a,m),P=[{icon:e.jsx(r.slots.densityCompactIcon,{}),label:s.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:e.jsx(r.slots.densityStandardIcon,{}),label:s.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:e.jsx(r.slots.densityComfortableIcon,{}),label:s.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],S=p.useMemo(()=>{switch(n){case"compact":return e.jsx(r.slots.densityCompactIcon,{});case"comfortable":return e.jsx(r.slots.densityComfortableIcon,{});default:return e.jsx(r.slots.densityStandardIcon,{})}},[n,r]),v=C=>{var G;h(X=>!X),(G=l.onClick)==null||G.call(l,C)},L=()=>{h(!1)},g=C=>{s.current.setDensity(C),h(!1)},y=C=>{ce(C.key)&&C.preventDefault(),ue(C.key)&&h(!1)};if(r.disableDensitySelector)return null;const d=P.map((C,G)=>e.jsxs(ye,{onClick:()=>g(C.value),selected:C.value===n,children:[e.jsx(Ce,{children:C.icon}),C.label]},G));return e.jsxs(p.Fragment,{children:[e.jsx(r.slots.baseTooltip,f({title:s.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},c,(j=r.slotProps)==null?void 0:j.baseTooltip,{children:e.jsx(r.slots.baseButton,f({ref:F,size:"small",startIcon:S,"aria-label":s.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":x,"aria-controls":x?b:void 0,id:u},l,{onClick:v},(I=r.slotProps)==null?void 0:I.baseButton,{children:s.current.getLocaleText("toolbarDensity")}))})),e.jsx(le,{open:x,target:m.current,onClose:L,position:"bottom-start",children:e.jsx(J,{id:b,className:ie.menuList,"aria-labelledby":u,onKeyDown:y,autoFocusItem:x,children:d})})]})}),ke=o=>{const{classes:t}=o;return O({root:["toolbarFilterList"]},N,t)},we=q("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(o,t)=>t.toolbarFilterList})(({theme:o})=>({margin:o.spacing(1,1,.5),padding:o.spacing(0,1)})),De=p.forwardRef(function(t,a){var v,L;const{slotProps:i={}}=t,l=i.button||{},c=i.tooltip||{},s=M(),r=D(),n=k(s,de),u=k(s,pe),b=k(s,K),x=ke(r),h=w(),m=w(),F=p.useMemo(()=>{if(b.open)return s.current.getLocaleText("toolbarFiltersTooltipHide");if(n.length===0)return s.current.getLocaleText("toolbarFiltersTooltipShow");const g=d=>u[d.field].filterOperators.find(j=>j.value===d.operator).label||s.current.getLocaleText(`filterOperator${ee(d.operator)}`).toString(),y=d=>{const{getValueAsString:j}=u[d.field].filterOperators.find(I=>I.value===d.operator);return j?j(d.value):d.value};return e.jsxs("div",{children:[s.current.getLocaleText("toolbarFiltersTooltipActive")(n.length),e.jsx(we,{className:x.root,ownerState:r,children:n.map((d,j)=>f({},u[d.field]&&e.jsx("li",{children:`${u[d.field].headerName||d.field}
                  ${g(d)}
                  ${d.value!=null?y(d):""}`},j)))})]})},[s,r,b.open,n,u,x]),P=g=>{var j;const{open:y,openedPanelValue:d}=b;y&&d===R.filters?s.current.hidePreferences():s.current.showPreferences(R.filters,m,h),(j=l.onClick)==null||j.call(l,g)};if(r.disableColumnFilter)return null;const S=b.open&&b.panelId===m;return e.jsx(r.slots.baseTooltip,f({title:F,enterDelay:1e3},c,(v=r.slotProps)==null?void 0:v.baseTooltip,{children:e.jsx(r.slots.baseButton,f({ref:a,id:h,size:"small","aria-label":s.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":S?m:void 0,"aria-expanded":S,"aria-haspopup":!0,startIcon:e.jsx(be,{badgeContent:n.length,color:"primary",children:e.jsx(r.slots.openFilterButtonIcon,{})})},l,{onClick:P},(L=r.slotProps)==null?void 0:L.baseButton,{children:s.current.getLocaleText("toolbarFilters")}))}))}),Ie=["quickFilterParser","quickFilterFormatter","debounceMs","className"],Ge=o=>{const{classes:t}=o;return O({root:["toolbarQuickFilter"]},N,t)},Re=q(oe,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(o,t)=>t.toolbarQuickFilter})(({theme:o})=>({width:"auto",paddingBottom:o.spacing(.5),"& input":{marginLeft:o.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${(o.vars||o).palette.divider}`},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}})),Me=o=>o.split(" ").filter(t=>t!==""),Be=o=>o.join(" ");function Ee(o){var v,L;const t=M(),a=D(),i=Ge(a),l=k(t,he),{quickFilterParser:c=Me,quickFilterFormatter:s=Be,debounceMs:r=a.filterDebounceMs,className:n}=o,u=E(o,Ie),[b,x]=p.useState(()=>s(l??[])),h=p.useRef(l);p.useEffect(()=>{A(h.current,l)||(h.current=l,x(g=>A(c(g),l)?g:s(l??[])))},[l,s,c]);const m=p.useCallback(g=>{const y=c(g);h.current=y,t.current.setQuickFilterValues(y)},[t,c]),F=p.useMemo(()=>te(m,r),[m,r]),P=p.useCallback(g=>{const y=g.target.value;x(y),F(y)},[F]),S=p.useCallback(()=>{x(""),m("")},[m]);return e.jsx(Re,f({as:a.slots.baseTextField,ownerState:a,variant:"standard",value:b,onChange:P,className:$(n,i.root),placeholder:t.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":t.current.getLocaleText("toolbarQuickFilterLabel"),type:"search"},u,{InputProps:f({startAdornment:e.jsx(a.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:e.jsx(a.slots.baseIconButton,f({"aria-label":t.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:b?"visible":"hidden"},onClick:S},(v=a.slotProps)==null?void 0:v.baseIconButton,{children:e.jsx(a.slots.quickFilterClearIcon,{fontSize:"small"})}))},u.InputProps)},(L=a.slotProps)==null?void 0:L.baseTextField))}const Oe=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],Ne=p.forwardRef(function(t,a){const{csvOptions:i,printOptions:l,excelOptions:c,showQuickFilter:s=!1,quickFilterProps:r={}}=t,n=E(t,Oe),u=D();return u.disableColumnFilter&&u.disableColumnSelector&&u.disableDensitySelector&&!s?null:e.jsxs(Pe,f({ref:a},n,{children:[e.jsx(ve,{}),e.jsx(De,{}),e.jsx(Le,{}),e.jsx(me,{csvOptions:i,printOptions:l,excelOptions:c}),e.jsx(T,{sx:{flex:1}}),s&&e.jsx(Ee,f({},r))]}))}),Ve=({values:o})=>{const[t,a]=p.useState(null),i=s=>{a(s.currentTarget)},l=()=>{a(null)},c=!!t;return e.jsxs(T,{sx:{height:"100%"},children:[e.jsx(H,{direction:"row",spacing:1,alignItems:"center",onMouseEnter:i,onMouseLeave:l,sx:{height:"100%"},children:o.map(s=>e.jsx(Q,{label:s,size:"small"},s))}),e.jsx(U,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:c,anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:l,disableRestoreFocus:!0,children:e.jsx(W,{container:!0,rowGap:1,columnGap:1,sx:{maxWidth:"300px",padding:2},children:o.map(s=>e.jsx(W,{item:!0,children:e.jsx(Q,{label:s,size:"small"})},s))})})]})},ze=({children:o})=>{const[t,a]=p.useState(null),i=s=>{a(s.currentTarget)},l=()=>{a(null)},c=!!t;return e.jsxs(T,{sx:{height:"100%"},children:[e.jsx(T,{onMouseEnter:i,onMouseLeave:l,sx:{height:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:o}),e.jsx(U,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:c,anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:l,disableRestoreFocus:!0,children:e.jsx(T,{sx:{maxWidth:"300px",padding:2},children:o})})]})},Ae=/A[cglmrstu]|B[aehikr]?|C[adeflmnorsu]?|D[bsy]|E[rsu]|F[elmr]?|G[ade]|H[efgos]?|I[nr]?|Kr?|L[airuv]|M[dgnot]|N[abdeiop]?|Os?|P[abdmortu]?|R[abefghnu]|S[bcegimnr]?|T[abcehilm]|U(u[opst])?|V|W|Xe|Yb?|Z[nr]|La\-Lu?|Ac\-Lr?/g,Qe=/(A[cglmrstu]|B[aehikr]?|C[adeflmnorsu]?|D[bsy]|E[rsu]|F[elmr]?|G[ade]|H[efgos]?|I[nr]?|Kr?|L[airuv]|M[dgnot]|N[abdeiop]?|Os?|P[abdmortu]?|R[abefghnu]|S[bcegimnr]?|T[abcehilm]|U(u[opst])?|V|W|Xe|Yb?|Z[nr]|La\-Lu?|Ac\-Lr?)|(.)/g,We=o=>!o.match(/\(|\)|\*/g)&&!o.match(Ae)?e.jsx("sub",{children:o}):e.jsx("span",{children:o}),_e=({content:o,...t})=>{let a;const i=o.match(Qe);return a=e.jsx("span",{children:i==null?void 0:i.map((l,c)=>e.jsx("span",{children:We(l)},c))}),e.jsx("span",{...t,children:a})},_=({hasPopover:o,children:t})=>o?e.jsx(ze,{children:t}):t,$e=o=>o.map(t=>{const{units:a,decimals:i,sigFigs:l,isFormula:c,hasPopover:s,...r}=t;return r.renderHeader=n=>e.jsxs(T,{children:[e.jsx(V,{fontSize:"0.875rem",fontWeight:"bold",children:n.colDef.headerName}),a&&e.jsx(V,{fontSize:"small",color:"grey.700",sx:{position:"absolute",bottom:"4px",left:n.colDef.type!=="number"?0:"auto",right:n.colDef.type==="number"?0:"auto",transform:"translate(0, 0)",zIndex:1e3},children:a})]}),!r.valueFormatter&&r.type==="number"&&(r.valueFormatter=n=>fe(n)?!isNaN(n)&&i||i===0?n===0?n:n<1/Math.pow(10,i)?`> ${1/Math.pow(10,i)}`:n.toLocaleString(void 0,{minimumFractionDigits:i,maximumFractionDigits:i}):!isNaN(n)&&l?n.toPrecision(l):n.toLocaleString():"-"),r.renderCell||(r.renderCell=n=>Array.isArray(n.value)?e.jsx(Ve,{values:n.value}):c?e.jsx(_,{hasPopover:s,children:e.jsx(_e,{content:n.value})}):e.jsx(_,{hasPopover:s,children:n.formattedValue})),r}),qe=({rows:o,columns:t,...a})=>e.jsx(xe,{rows:o,columns:$e(t),disableColumnSelector:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"},"& .MuiDataGrid-cell:focus-within":{outline:"none"},"& .MuiDataGrid-overlayWrapper":{minHeight:"4rem"}},...a}),at=function(){const{state:t,dispatch:a}=ge();return e.jsxs(T,{children:[e.jsx(ne,{pageTitle:"Compare Data App",description:"Description of this app section",actions:e.jsxs(H,{direction:"row",children:[e.jsxs(T,{children:[t.selectedRows.length<2&&e.jsx(B,{variant:"outlined",disabled:!0,"data-testid":"cpd-compare-button",children:"Compare scenarios"}),t.selectedRows.length>1&&e.jsx(z,{to:"/compare-data/compare",children:e.jsxs(B,{variant:"contained","data-testid":"cpd-compare-button",children:["Compare scenarios (",t.selectedRows.length,")"]})})]}),e.jsx(T,{children:e.jsx(z,{to:"/compare-data/new",children:e.jsx(B,{variant:"contained","data-testid":"cpd-new-button",children:"New scenario"})})})]}),sx:{padding:3,backgroundColor:"white"}}),e.jsx(se,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:3},children:e.jsx(re,{children:e.jsx(qe,{rows:t.data,getRowId:i=>i[t.dataIdField],columns:t.columns,checkboxSelection:!0,rowSelectionModel:t.selectedRows,onRowSelectionModelChange:i=>a(je(i)),disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnFilter:!0,initialState:{pagination:{paginationModel:{page:1,pageSize:25}}},slots:{toolbar:Ne},slotProps:{toolbar:{showQuickFilter:!0}},sx:{"& .MuiDataGrid-toolbarContainer":{padding:2,paddingBottom:0}}})})})]})};export{at as component};
